## List ranking

Дан список из n вершин, заданный массивом next.
Последняя вершина смотрит в себя.

Хотим для каждой вершины найти расстояние до конца.

Можно за O(n * log(n)) work и O(log(n)) span
сделать что-то типа двоичных подъемов, прыгая каждый раз на 2^i.

```
len = [1, 1, 1, ...] // 0 where end
for _ in 0..log(n):
    old_next = next
    old_len = len
    pfor i in 0 until n:
        next = old_next[old_next[i]]
        len = old_len[i] + old_len[old_next[i]]
```

Попробуем уменьшить задачу до n / log(n).

Покрасим вершинки в три цвета.
Вершин какого-то цвета >= n/3.
Выкинем их из списка, попутно запомнив, где они были,
и увеличив соответствующий len до 2-х.

Тогда применив такую штуку log(log(n)) раз
мы сведем задачу к нужному размеру.

```
Work = O(n * log(n))
Span = O(log^2(n) * log(log(n)))
```
