## Rake

Задача: \
Дано бинарное дерево, представляющее собой арифметическое выражение, 
в котором листья - числа, а не-листовые узлы - операции +, - и *

Хотим в ситуации, когда у вершины есть хотя бы один лист,
уметь выкидывать эту вершину, "пробрасывая" результат наверх.

Решение: \
Будем хранить в каждой вершине 4 константы: \
`c1 * a * b + c2 * a + c3 * b + c4` \
Где `a` и `b` - еще не посчитанные дети вершины `c`.

Последовательно - понятно, как жить. Осталось научиться жить параллельно.

Упорядочим все листья (что-то про tin).
Будем вырезать только нечетные.
Но пока это не очень помогает - может быть ситуация,
когда конфликт всё равно есть.
```
  x
 / \
1   y
   / \
  2   3
```
Назовем стеблем вершину, у которой есть нечетный лист.
Утверждается, что не бывает трех стеблей, соседних по ребру.
Доказательство перебором, четность не сойдется.

Ещё финт ушами: Если есть два соседних стебля, 
то их листы разной направленности. Док-во аналогично.

Итого делим нечетные листья еще на два типа:
нечетные левые и нечетные правые.
Будем сжимать их отдельно, поскольку они друг другу не мешают 
(тк. стебли не соседние).

Повторяем это рекурсивно, span - какой-то полилог.
